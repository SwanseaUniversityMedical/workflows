{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",

  "extends": [":enableRenovate"],

  "schedule": ["* * * * *"],

  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["^\\.github/workflows/.*\\.yaml$"],
      "matchStrings": [
        "uses:\\s*SwanseaUniversityMedical/workflows/(?<path>[^@]+)@(?<currentValue>v\\d+\\.\\d+\\.\\d+-[A-Za-z0-9\\-]+)"
      ],
      "packageNameTemplate": "SwanseaUniversityMedical/workflows",
      "depNameTemplate": "{{{path}}}",
      "datasourceTemplate": "github-tags",
      "versioningTemplate": "regex:^v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)-(?<compatibility>[A-Za-z0-9\\-]+)$",
      "autoReplaceStringTemplate": "uses: SwanseaUniversityMedical/workflows/{{{path}}}@{{{newDigest}}}  # {{{currentValue}}}"
    }
  ],

  "packageRules": [
    {
      // Disable the default GitHub Actions manager for this package
      "matchManagers": ["github-actions"],
      "matchPackagePatterns": ["^SwanseaUniversityMedical/workflows$"],
      "enabled": false
    },
    {
      // Custom behavior for our regex-managed package
      "matchManagers": ["regex"],
      "matchPackageNames": ["SwanseaUniversityMedical/workflows"],
      "pinDigests": true,
      "additionalBranchPrefix": "{{{compatibility}}}-",
      "commitMessageAction": "{{{compatibility}}} - Update",
      "labels": ["{{{compatibility}}}"]
    }
  ]
}
